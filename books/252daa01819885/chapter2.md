---
title: "テストコードでは、何を検証すればいいのか？"
---

# テストコードでは何を検証すればよいのか？

テストコードを書く際にまず考えるべきことは、「何を検証するべきか」です。基本的にテストコードは次の2つの観点から構成されます。

* **アウトプットのテスト**
* **副作用の検証**

## 1. アウトプットのテスト

単体テストでは、関数やメソッドに特定の**インプット**を与えたときに、期待される**アウトプット**が得られるかどうかを検証します。
（HTTPリクエストを行うような結合テストだとしても、HTTPリクエストという**インプット**とHTTPレスポンスという**アウトプット**があります。）

これはいわゆる「**戻り値（return value）**」の確認にあたります。たとえば、Rubyではメソッドの戻り値がそのまま返されるため、その挙動が仕様どおりかを確かめることが重要です。

## 2. 副作用のテスト

関数がインプットを受け取った結果、何かしらの **副作用（side effect）** をもたらす場合があります。

具体的には：

* データの変更
* データベースの更新
* 外部サービスへの通信

などが該当します。これらの副作用もテストの重要な対象です。

:::details プログラムの副作用とは？
プログラミングにおける副作用とは、関数が値を返すだけでなく、プログラムの状態やローカル環境以外の状態変数（グローバル変数、オブジェクトの状態など）を変化させることを指します。
例えば、変数に値を代入したり、ファイルに書き込んだり、コンソールに出力したりするなどが副作用です。

参考文献: https://ja.wikipedia.org/wiki/%E5%89%AF%E4%BD%9C%E7%94%A8_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0)
:::

## まとめ

テストコードにおいて検証すべきことは大きく2つです。

1. アウトプットのテスト
2. 関数やメソッドの副作用

これらをテストすることで、価値のあるテストコードになります。

